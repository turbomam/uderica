configuration from /home/mark/gitstage/uderica/silage/V-HMC/Bacteria/V-HMC_bacteria_envvars.sh
export PROJ_GENE_TITLE="V-HMC_Bacteria"
export PROJ_GENE_HOME="/home/mark/gitstage/uderica/silage/V-HMC/Bacteria"

export PAIR_PREFIX="4924-"
export PAIR_SUFFIX="-MS515F-926R"
export R1="_R1"
export R2="_R2"
export FILE_EXT=".fastq"

export LOG_FILE="${PROJ_GENE_HOME}/${PROJ_GENE_TITLE}.log"

export REF_SEQ_FILE="/home/mark/gitstage/uderica/silage/gg_13_8_otus/rep_set/97_otus.fasta"

export FASTQC_PATH="/home/mark/gitstage/uderica/silage/FastQC/fastqc"
export MULTIQC_PATH="multiqc"

export FLASH_PATH="/home/mark/gitstage/uderica/silage/FLASH-1.2.11/flash"
export FLASH_OVERLAP=100

# work on this some more... how to pick best depth?
export CORE_DIV_MIN_DEPTH=10000
export THREAD_CT=6

export DATA_DIR="raw_data_bacteria"
export FLASHED_DIR="${PROJ_GENE_HOME}/${DATA_DIR}/flashed"
export EXTENDED_DIR="${FLASHED_DIR}/extended"
export PICKED_DIR="${EXTENDED_DIR}/flash_trim_cat_pick"

export OTU_PICK_PARAM_FILE="${PROJ_GENE_HOME}/otu_pick_param.txt"

# look here for sample ID, barcodes, primers, optionally experimental factors
# export QIIME_MAPPING_FILE="${PROJ_GENE_HOME}/map16S_MAM_some_factors.txt"
export QIIME_MAPPING_FILE="${PROJ_GENE_HOME}/map.txt"

# look here for sample infomration, except mapping info (esp. barcode and primers)
# will be looping though some column looking for IDs,
# which should then appear in files with names:
# ${PROJ_GENE_HOME}/${DATA_DIR}/${PAIR_PREFIX}<ID>${PAIR_SUFFIX}{${R1}|${R2}}${FILE_EXT}
export SAMPLE_METADATA_FILE="${PROJ_GENE_HOME}/LalStressMicrobiomeInfo.txt"

export FILE_PATH_FILE="${PROJ_GENE_HOME}/file_path.txt"

export PHYLOSEQ_OUTPUT_PREFIX="V-HMC_bacteria"


# could probably just loop though mapping file instead
# add capability to look for ID:filename relationships in some lookup table

# not doing any error/dependency checking yet
# not doing and cleanup from previous run yet
# FALSE
export FRESH_LOG="TRUE"
export INITIAL_FASTQC="FALSE"
export INITIAL_MULTIQC="FALSE"
export DO_FLASH="FALSE"
export POST_FLASH_BOTHQC="FALSE"
# export POST_FLASH_FASTQC="TRUE"
# export POST_FLASH_MULTIQC="TRUE"
export DO_QIIME_SPLIT="FALSE"
export DO_QIIME_PICK="FALSE"
export DO_PYTHON_OTU_FILTERING="FALSE"
export DO_BIOM_CONVERSION="FALSE"
export DO_CORE_DIV="FALSE"
export DO_PHYLOSEQ="TRUE"

Num samples: 97
Num observations: 5528
Total count: 3469930
Table density (fraction of non-zero values): 0.071

Counts/sample summary:
 Min: 4717.0
 Max: 65802.0
 Median: 35034.000
 Mean: 35772.474
 Std. dev.: 17032.526
 Sample Metadata Categories: None provided
 Observation Metadata Categories: taxonomy

Counts/sample detail:
1155: 4717.0
1157: 4872.0
834: 5014.0
1140: 5736.0
1139: 7201.0
832: 7539.0
831: 9314.0
425: 9387.0
841: 11783.0
1141: 11927.0
1153: 12362.0
1156: 12534.0
1142: 13567.0
1154: 14057.0
1138: 15038.0
833: 15773.0
424: 16127.0
426: 16543.0
1035: 17263.0
430: 18106.0
429: 18371.0
435: 18925.0
427: 19138.0
431: 21873.0
1033: 21993.0
439: 23716.0
436: 24931.0
441: 24954.0
440: 25469.0
1149: 26214.0
432: 27018.0
434: 27092.0
1034: 28072.0
836: 28660.0
1036: 28738.0
1150: 28981.0
437: 30304.0
838: 30554.0
837: 30636.0
843: 30681.0
839: 30725.0
842: 30858.0
1016: 31240.0
1032: 31440.0
844: 32051.0
1147: 32937.0
1037: 33556.0
1039: 34015.0
1151: 35034.0
1148: 35431.0
1031: 35582.0
766: 36946.0
442: 38402.0
1020: 38805.0
765: 39971.0
450: 41071.0
1028: 41941.0
1025: 42123.0
1017: 44560.0
1023: 44604.0
1146: 45201.0
1019: 45689.0
1018: 45883.0
449: 47000.0
1040: 47334.0
1024: 48105.0
1026: 48173.0
1038: 48766.0
1145: 48797.0
758: 49354.0
761: 49464.0
1029: 51405.0
448: 51614.0
458: 51919.0
457: 52027.0
451: 52564.0
447: 52576.0
459: 53227.0
760: 54450.0
764: 54464.0
757: 54723.0
1143: 54809.0
1144: 54953.0
453: 54955.0
1022: 54957.0
759: 55315.0
1030: 56636.0
1021: 56677.0
461: 57341.0
454: 58315.0
456: 58826.0
1027: 58908.0
455: 60896.0
763: 62497.0
762: 64622.0
460: 65214.0
452: 65802.0
Sun Aug 27 23:06:20 EDT 2017 start phyloseq analysis and plotting in R
Loading required package: methods
Loading required package: S4Vectors
Loading required package: stats4
Loading required package: BiocGenerics
Loading required package: parallel

Attaching package: ‘BiocGenerics’

The following objects are masked from ‘package:parallel’:

    clusterApply, clusterApplyLB, clusterCall, clusterEvalQ,
    clusterExport, clusterMap, parApply, parCapply, parLapply,
    parLapplyLB, parRapply, parSapply, parSapplyLB

The following objects are masked from ‘package:stats’:

    IQR, mad, xtabs

The following objects are masked from ‘package:base’:

    anyDuplicated, append, as.data.frame, cbind, colnames, do.call,
    duplicated, eval, evalq, Filter, Find, get, grep, grepl, intersect,
    is.unsorted, lapply, lengths, Map, mapply, match, mget, order,
    paste, pmax, pmax.int, pmin, pmin.int, Position, rank, rbind,
    Reduce, rownames, sapply, setdiff, sort, table, tapply, union,
    unique, unsplit, which, which.max, which.min


Attaching package: ‘S4Vectors’

The following object is masked from ‘package:plyr’:

    rename

The following objects are masked from ‘package:base’:

    colMeans, colSums, expand.grid, rowMeans, rowSums

Loading required package: IRanges

Attaching package: ‘IRanges’

The following object is masked from ‘package:plyr’:

    desc

The following object is masked from ‘package:phyloseq’:

    distance

Loading required package: GenomicRanges
Loading required package: GenomeInfoDb
Loading required package: SummarizedExperiment
Loading required package: Biobase
Welcome to Bioconductor

    Vignettes contain introductory material; view with
    'browseVignettes()'. To cite Bioconductor, see
    'citation("Biobase")', and for packages 'citation("pkgname")'.


Attaching package: ‘Biobase’

The following object is masked from ‘package:phyloseq’:

    sampleNames

'BiocParallel' did not register default BiocParallelParams:
  invalid class “MulticoreParam” object: 1: ‘cluster’, ‘.clusterargs’, ‘.uid’, ‘RNGseed’ must be length 1
invalid class “MulticoreParam” object: 2: ‘.clusterargs’, ‘.controlled’, ‘logdir’, ‘resultdir’ must be length 1
Warning message:
In is.na(x[[i]]) :
  is.na() applied to non-(list or vector) of type 'environment'
[1] ‘1.4.4’
[1] ‘1.19.1’
[1] ‘2.2.1’
[1] ‘1.8.4’
[1] ‘1.14.1’
[1] "/home/mark/gitstage/uderica/silage/V-HMC/Bacteria/raw_data_bacteria/flashed/extended/flash_trim_cat_pick/otu_table_json.biom"
[1] "/home/mark/gitstage/uderica/silage/V-HMC/Bacteria/raw_data_bacteria/flashed/extended/flash_trim_cat_pick/rep_set.tre"
[1] "/home/mark/gitstage/uderica/silage/V-HMC/Bacteria/map.txt"
There were 50 or more warnings (use warnings() to see the first 50)
phyloseq-class experiment-level object
otu_table()   OTU Table:         [ 2998 taxa and 97 samples ]
sample_data() Sample Data:       [ 97 samples by 8 sample variables ]
tax_table()   Taxonomy Table:    [ 2998 taxa by 8 taxonomic ranks ]
phy_tree()    Phylogenetic Tree: [ 2998 tips and 2996 internal nodes ]
 
 basic bar plot 
 
 
 richness plot 
 
Warning message:
Removed 291 rows containing missing values (geom_errorbar). 
 
 create alpha diversity table 
 
 
 start ordination analysis 
 
Species coordinates not found directly in ordination object. Attempting weighted average (`vegan::wascores`)
Square root transformation
Wisconsin double standardization
Run 0 stress 0.06484498 
Run 1 stress 0.06436609 
... New best solution
... Procrustes: rmse 0.008317154  max resid 0.06370665 
Run 2 stress 0.06436659 
... Procrustes: rmse 0.0005194025  max resid 0.004609586 
... Similar to previous best
Run 3 stress 0.0648434 
... Procrustes: rmse 0.008309984  max resid 0.06348269 
Run 4 stress 0.06436508 
... New best solution
... Procrustes: rmse 0.0001389824  max resid 0.000711471 
... Similar to previous best
Run 5 stress 0.06436591 
... Procrustes: rmse 0.0006915055  max resid 0.004736975 
... Similar to previous best
Run 6 stress 0.06484669 
... Procrustes: rmse 0.00831192  max resid 0.06401824 
Run 7 stress 0.0648424 
... Procrustes: rmse 0.00831275  max resid 0.06351207 
Run 8 stress 0.06436349 
... New best solution
... Procrustes: rmse 0.0001796712  max resid 0.001412322 
... Similar to previous best
Run 9 stress 0.06436734 
... Procrustes: rmse 0.000564107  max resid 0.004560477 
... Similar to previous best
Run 10 stress 0.06484558 
... Procrustes: rmse 0.008326566  max resid 0.0635179 
Run 11 stress 0.1322668 
Run 12 stress 0.1322845 
Run 13 stress 0.06436738 
... Procrustes: rmse 0.0007525185  max resid 0.004762173 
... Similar to previous best
Run 14 stress 0.06484619 
... Procrustes: rmse 0.008318331  max resid 0.06378948 
Run 15 stress 0.06520283 
Run 16 stress 0.06484757 
... Procrustes: rmse 0.008340941  max resid 0.06346684 
Run 17 stress 0.06436651 
... Procrustes: rmse 0.0007165077  max resid 0.004696536 
... Similar to previous best
Run 18 stress 0.06484668 
... Procrustes: rmse 0.008316934  max resid 0.06362328 
Run 19 stress 0.0643657 
... Procrustes: rmse 0.0005757325  max resid 0.004659396 
... Similar to previous best
Run 20 stress 0.0648484 
... Procrustes: rmse 0.008357121  max resid 0.06328549 
*** Solution reached
Warning message:
non-unique values when setting 'row.names':  
 
 start differential analysis 
 
phyloseq-class experiment-level object
otu_table()   OTU Table:         [ 2998 taxa and 97 samples ]
sample_data() Sample Data:       [ 97 samples by 8 sample variables ]
tax_table()   Taxonomy Table:    [ 2998 taxa by 8 taxonomic ranks ]
phy_tree()    Phylogenetic Tree: [ 2998 tips and 2996 internal nodes ]
[1] LB+LP LB+LP C     C     C-AS  LB    LB-AS LB+LP
Levels: C C-AS LB LB-AS LB+LP
converting counts to integer mode
estimating size factors
Error in estimateSizeFactorsForMatrix(counts(object), locfunc = locfunc,  : 
  every gene contains at least one zero, cannot compute log geometric means
Calls: DESeq ... estimateSizeFactors -> .local -> estimateSizeFactorsForMatrix
Execution halted
Sun Aug 27 23:06:38 EDT 2017 phyloseq complete
